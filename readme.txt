Здравствуйте! Меня зовут Константин.
Это мой простенький скетч на Ардуино для датчиков протечки.
В нем я использовал Ардуино nano, модули с реле для управления краном 
(https://ru.aliexpress.com/item/32792871130.html?spm=a2g0s.9042311.0.0.274233edWEMPv8),
датчики протечки (https://ru.aliexpress.com/item/1835773801.html?spm=a2g0s.9042311.0.0.274233edsfWnz7)
и дисплей Oled I2C маленький но для моих нужд достаточный(https://ru.aliexpress.com/item/32780054633.html?spm=a2g0s.9042311.0.0.43cf33ed3e9LCq).
При сборке необходимо учитывать длинну линий до концевиков и кнопки, они должны быть как можно короче, иначе будет глючить страшно. Я использовал дополнительные реле они упралялись концевиками и те в свою очередьь подавали сигнал о срабатывании.
Пояснения если захотите использовать его у себя.
ВСЕ ПОРТЫ указана в файле Variables.h там еще будет уровень фиксации протечки и период выполнения тестового прогона крана что бы не закис.
Имена точек устанавливаются в констркторе класса WorkOut в файле WorkOut.h Если надо будет изменить количество точек необходимо изменить в 19 строке waterPoint scanRoom[4]; число 4 на необходимое вам и далее число инициализаций. В приципе все просто.
Если надо будет как то изменить отображение на дисплее в Monitor.h функция showDisplay().
По настройка вроде бы все.
